-------------------- 채현 --------------------

홈 슬라이더,info슬라이더,카테고리리스트,카테고리쏘티드,댓글, 댓글좋아요,싫어요, 검색페이지
==>  pojo,service,impl,단위테스트 완료


view에 나타내기 까지 구현
==> 카테고리 리스트, 카테고리 쏘티드(인피니트스크롤,정렬 아직 미구현), 홈 슬라이더(액션 구현 그외 구현중)

---------------------------------------------




-------------------- 세빈 --------------------

Movie infomation
-해당 영화에 해당하는 정보 불러오기
-해당 영화와 유저 정보 조회하여 
 좋아요(등록및 삭제)와 관심기능(등록및 삭제) 구현

Wish list
-유저정보에 해당하는 장바구니 목록 불러오기

Interest movie
-유저정보에 해당하는 관심영화 목록 불러오기
 목록 드롭박스 최신순,낮은가격순,높은가격순 구현

========================================

해야할것

Top100리스트
별점기능
관심영화목록 구매순,평점순
배우리스트 받아오기
관심작품 및 장바구니 해당 선택상품 삭제기능

--------------------------------------------




------------------- 태희 --------------------

Login.jsp(로그인처리)
[Ajax(post)이용하여 로그인 기능 구현]
 ajax를 사용하여 입력받은 id와 pw를 controller로 보내 입력 받은 값과 일치하는 회원정보를 DB user table에서 조회하여 조회에 성공할 시 로그인처리(세션 생성)

Search_id_for_email(아이디 찾기)
[이름 이메일로 일치하는 회원 정보를 찾도록 구현, 
이메일 인증을 위해 mailJS플러그인 사용,
페이지 이동 없이 조회기능을 구현하기 위해 Ajax사용]
 ajax를 사용하여 입력받은 이름과 email을 controller로 보내 입력 받은 값과 일치하는 회원정보를 DB user table에서 조회하여 조회에 성공할 시 입력받은 email로 인증번호 전송
인증번호를 입력받고 인증 확인 버튼을 통해 인증을 완료받고 동시에 ajax통신을 하여 입력받은 email정보와 일치하는 유저의 id와 가입날자를 리턴하여 변수로 저장(email정보는 중복 될 수 없기때문에  email 로 조회하였음)
최종적으로 확인버튼을 누르면 변수로 저장했던 
해당 유저의 ID와 가입일 노출
(인증 단계를 거치지 않고 다음단계를 누르거나 형식에 벗어난 값을 입력하는 등에 대한 예외처리는 front에서 구현하였음)


Search_password_for_id(비밀번호 찾기 id입력 단계)
[ajax이용하여 일치하는 아이디가 있는지 여부 판별]
다음 버튼을 누를 시 ajax를 이용해 입력받은 id값으로 user table조회하여 일치하는 아이디가 있는 경우 다음 단계로 이동하며 id세션 생성(다음페이지에서 쓰일 정보, 단 로그인 처리에서 생성했던 id세션과 이름이 일치할 경우 의도치 않게 혼용될 수 있으므로 이름을 다르게 지정)

Search_password_for_email(비밀번호 찾기 email인증 단계)
[id찾기와 조회기능과 이메일 인증기능은 같으나 조회할 때 추가적으로
이전 페이지에서 생성하였던 id세션과도 일치해야 하도록 구현]
인증단계 모두 거친후 정보 조회에 성공 시 강제적으로 비밀번호를 변경하도록 한다. 새로운 비밀번호를 입력받고 변경확인 버튼을 누를 시 이전단계(비밀번호 찾기 아이디입력)에서 입력했던 id세션값에 해당하는 user정보의 pw값을 업데이트
(인증 단계를 거치지 않고 다음단계를 누르거나 형식에 벗어난 값을 입력하는 등에 대한 예외처리는 front에서 구현하였음)

Sign_up_agree(회원가입 약관동의 단계)
[필수동의 사항과 선택사항 선택 여부 판별 후 다음 단계로 이동시킴]
필수동의 사항을 모두 선택 후 다음버튼을 누를 시 선택 동의사항(이메일 수신여부)에 동의 했는지에 대한 여부를 세션에 저장하며 다음페이지로 이동

Sign_up_information(회원가입 정보기입 단계)
[회원정보기입, 중복검사, 이메일인증 등 인증단계 거친 후 User DB에 데이터 저장] 아이디, 이메일 중복검사시 db에 저장된 값 조회하여 중복여부 판별 모든 인증 밑 검사단계 거친 후 가입완료시 세션에 저장되어있는 이메일  수신여부 판별하여 모든 정보 User DB에 저장

MY페이지(세션 요구하는 페이지)접근시 session정보가 없다면 로그인 페이지로 유도(로그인시 세션 발생)

MY_information(내정보)
[페이지 진입시 세션에 저장한 id값과 입력받은 pw를 ajax사용하여 조회 처리 후 조회 성공시 진입 할 수 있도록 구현]

1) 비밀번호 변경
- 기존비밀번호, 새 비밀번호, 새 비밀번호 재확인 값 입력받고
ajax처리하여 기존 비밀번호와 세션 id값과 일치하는 정보 있는지 조회(1차 조건)
- 새 비밀번호와 재확인 비밀번호값 일치여부와 입력양식 front에서 판별(2차 조건)
1차 2차 조건 완료하였다면 새 비밀번호 입력값 update처리

2) 이메일 변경
- 기존비밀번호 입력받아 세션 id와 같이 user db조회하여 조회 성공 시
이메일 변경 메시지 박스 노출

- 변경할 이메일 주소 입력 후 메일전송 누르면 mailJS사용하여 이메일 전송
인증번호값 일치할시 user db에서 이메일 update처리

3) 카드 등록/변경
session이용하여 유저가 등록한 카드정보가 없다면 카드정보 등록 버튼을
기존에 등록했던 카드정보가 있따면 카드정보 수정 버튼을 노출

- 기존비밀번호 입력받아 세션 id와 같이 user db조회하여 조회 성공 시
카드정보 입력 메시지 박스 노출
- 빈칸없이 정보 모두 기입 시 user db에 카드번호 저장

4) 회원탈퇴

버튼 클릭시 회원탈퇴에 동의하는지 의사 재 확인 후
동의 할 경우 유저가 탈퇴할 경우 쓸모없어지는 장바구니, 관심영화, 코인충전 내역, 영화 쿠매 내역, 쿠폰리스트, 데이터 삭제

유저가 삭제되더라도 남아있어야 할 댓글. 별점, 댓글 좋아요 db에서 유저참조키 null처리
이후 해당 유저 데이터 삭제

----------------------------------------




------------------ 지환 -----------------

공통사항
로그인이 필요한 부분에 로그인 하지 않고 진입시 로그인 페이지로 이동되게 하는 기능
각종 파라미터 값을 받아올때 db에서 한번 더 검사 후 실행되도록 함

무료영화, 할인영화
1) 무료영화 정보들을 가져와서 view 페이지로 전송
2) 최신 개봉한 영화 x개를 제외한 나머지 영화들중 랜덤한 영화를 뽑아서 무료영화로 만들어주는 기능 (임의로 무료영화 갯수(n) 설정 가능)
3) 기간이 끝난 무료영화는 다시 가격을 되찾고 2)을 n개 까지 반복 하는 기능 <-- 스케쥴러
4) 최신 개봉한 영화 x개를 제외한 영화들중 전체의 33%의 영화가 할인률 5~60의 영화가 되도록 설정 하는 기능

코인충전, 환불
1) 선택된 버튼에 맞게 충전 페이지의 라디오 버튼이 선택된 채로 View가 이동되는 기능
2) 로그인세션값과 비교하여 현재 보유코인 및 코인구매내역 출력
3) 코인 구매 후 일주일이 지났을 시 환불 불가능하게 하는 기능
4) 보유코인이 환불시킬 코인보다 적을 경우 환불 불가능하게 하는 기능
5) 코인 구매시에 유저의 카드 정보값 조회후 등록된 카드가 없을시 카드 등록 페이지로 이동
6) 코인 구매시 비밀번호 체크 기능 ( 태희 코드 )
7) 보유코인이 환불 코인보다 많고 일주일이 지나지 않은 상품에 한하여 환불 가능 ( 유저 코인 차감 )

내영상, 환불
1) 로그인세션값과 비교하여 현재 보유한 영화(내영상 + 휴지통), 영화 구매내역 출력 ( 대여상품에만 남은 기간 출력 )
2) 내영상에서 영상 선택시 시청했는지 판별하여 시청하였으면 이어보기를, 하지 않았다면 주의사항 출력 후 결과값을 받아 시청상태로 변경
   (페이지 진입 후 대여 기간이 끝날 수 있으므로 기간체크를 한번 더 함)
3) 내영상에서 선택된 상품들이 휴지통으로 이동되도록 하는 기능 ( 휴지통에서 복원도 같은 메커니즘 )
4) 대여 기간이 끝난 제품은 내영상, 휴지통에서 사라지고 구입내역에서만 확인 가능
5) 시청했는지 여부를 판별하여 시청하였을 시 환불 불가능하게 하는 기능
6) 영화 구매 후 일주일이 지났을 시 환불 불가능하게 하는 기능
7) 구매 후 일주일이 지나지 않고 시청하지 않은 상품에 한하여 환불 가능 ( 유저 코인 증가 )

쿠폰
1) 메인 페이지에서 쿠폰을 유저에게 지급하는 기능 ( 이미 보유시 중복지급 x )
2) 쿠폰 기간이 다되면 일괄 삭제되는 기능 <-- 스케쥴러
3) 영화 구매 페이지에서 사용하지 않은 쿠폰만 출력
4) 쿠폰 사용시 쿠폰 사용상태로 변경, 내 쿠폰에서 확인 가능

영화 구매
1) 영화 상세보기 페이지에서 구매버튼 클릭시 해당 영화 구매 페이지로 이동
2) 장바구니 페이지에서 구매버튼 클릭시 선택된 상품들 정보가 담긴채로 영화 구매 페이지로 이동
3) 영화 구매 페이지에서 (url 조작시) 파라미터 값으로 받은 영화가 실제 존재하는지 판별하여 존재하지 않는다면 메인화면으로 이동
4) 3)과 마찬가지로 파라미터 값으로 동일한 영화정보를 받아왔을 시 메인화면으로 이동
5) 영화 구매시 쿠폰사용시 해당 쿠폰의 금액만큼 차감된 금액으로 결제되도록 하는 기능 ( 유저 코인 감소 0원보다 작을시 0원 결제 )
6) 영화 구매시 비밀번호 체크 기능 ( 태희 코드 )
7) 이미 보유중인 영화인경우(대여기간이 끝난 제품 제외) 중복구매 방지 기능
8) 보유중인 코인이 부족할시 영화 구매 불가능
9) 영화 구매 확정시 장바구니 조회 후 구매한 제품의 해당하는 장바구니 목록 삭제 하는 기능



추후 구현해야 할것
1)정렬기능
2)추후 일정 기간마다 할인영화들을 모두 초기화 하고 다시 할인영화의 4)의 과정을 반복하는 기능 추가 예정
3)쿠폰을 이용해서 구매한 영화는 환불이 안되도록 하고싶음..(아마 buy_movie_list에 use_coupon 컬럼을 추가해야 구현 가능할듯)

----------------------------------------
